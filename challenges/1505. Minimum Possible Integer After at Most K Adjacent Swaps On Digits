/**************************\U0001f60e**************************/
const minInteger = (num, k) => {
  const n = num.length;
  const pos = Array.from({ length: 10 }, () => []);
  for (let i = 0; i < n; i++) {
    pos[+num[i]].push(i);
  }

  const bit = Array(n + 1).fill(0);
  const update = (i) => {
    for (++i; i <= n; i += i & -i) bit[i]++;
  };
  const query = (i) => {
    let res = 0;
    for (++i; i > 0; i -= i & -i) res += bit[i];
    return res;
  };

  let result = '';
  let used = Array(n).fill(false);
  for (let i = 0; i < n; i++) {
    for (let d = 0; d <= 9; d++) {
      while (pos[d].length && used[pos[d][0]]) pos[d].shift();
      if (!pos[d].length) continue;
      const idx = pos[d][0];
      const cost = idx - query(idx);
      if (cost <= k) {
        k -= cost;
        result += d;
        used[idx] = true;
        update(idx);
        break;
      }
    }
  }

  return result;
};
