function minimumSum(grid) {
    const m = grid.length, n = grid[0].length;

    function getArea(r1, r2, c1, c2) {
        let minR = Infinity, maxR = -1, minC = Infinity, maxC = -1;
        for (let i = r1; i <= r2; i++) {
            for (let j = c1; j <= c2; j++) {
                if (grid[i][j] === 1) {
                    minR = Math.min(minR, i);
                    maxR = Math.max(maxR, i);
                    minC = Math.min(minC, j);
                    maxC = Math.max(maxC, j);
                }
            }
        }

        if (maxR === -1) return 0;
        return (maxR - minR + 1) * (maxC - minC + 1);
    }

    let ans = Infinity;

    for (let c1 = 0; c1 < n - 2; c1++) {
        for (let c2 = c1 + 1; c2 < n - 1; c2++) {
            let a1 = getArea(0, m - 1, 0, c1);
            let a2 = getArea(0, m - 1, c1 + 1, c2);
            let a3 = getArea(0, m - 1, c2 + 1, n - 1);
            if (a1 && a2 && a3) ans = Math.min(ans, a1 + a2 + a3);
        }
    }

    for (let r1 = 0; r1 < m - 2; r1++) {
        for (let r2 = r1 + 1; r2 < m - 1; r2++) {
            let a1 = getArea(0, r1, 0, n - 1);
            let a2 = getArea(r1 + 1, r2, 0, n - 1);
            let a3 = getArea(r2 + 1, m - 1, 0, n - 1);
            if (a1 && a2 && a3) ans = Math.min(ans, a1 + a2 + a3);
        }
    }

    for (let c = 0; c < n - 1; c++) {
        for (let r = 0; r < m - 1; r++) {
            let a1 = getArea(0, m - 1, 0, c);
            let a2 = getArea(0, r, c + 1, n - 1);
            let a3 = getArea(r + 1, m - 1, c + 1, n - 1);
            if (a1 && a2 && a3) ans = Math.min(ans, a1 + a2 + a3);

            let b1 = getArea(0, m - 1, c + 1, n - 1);
            let b2 = getArea(0, r, 0, c);
            let b3 = getArea(r + 1, m - 1, 0, c);
            if (b1 && b2 && b3) ans = Math.min(ans, b1 + b2 + b3);

            let c1 = getArea(0, r, 0, n - 1);
            let c2 = getArea(r + 1, m - 1, 0, c);
            let c3 = getArea(r + 1, m - 1, c + 1, n - 1);
            if (c1 && c2 && c3) ans = Math.min(ans, c1 + c2 + c3);

            let d1 = getArea(r + 1, m - 1, 0, n - 1);
            let d2 = getArea(0, r, 0, c);
            let d3 = getArea(0, r, c + 1, n - 1);
            if (d1 && d2 && d3) ans = Math.min(ans, d1 + d2 + d3);
        }
    }

    return ans;
}
