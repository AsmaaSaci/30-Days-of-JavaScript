/**
 * @param {string} num
 * @param {number} target
 * @return {string[]}
 */
var addOperators = function(num, target) {

    const result = [];

    const backtrack = (index, path, value, last) => {
        if (index === num.length) {
            if (value === target) result.push(path);
            return;
        }

        for (let i = index; i < num.length; i++) {

            const currStr = num.slice(index, i + 1);
            if (currStr.length > 1 && currStr[0] === '0') break; // we skip leading zeros

            const currNum = Number(currStr);

            if (index === 0) {
                backtrack(i + 1, currStr, currNum, currNum);

            } else {
                backtrack(i + 1, path + '+' + currStr, value + currNum, currNum);
                backtrack(i + 1, path + '-' + currStr, value - currNum, -currNum);
                backtrack(i + 1, path + '*' + currStr, 
                            value - last + last * currNum, last * currNum);
            }
        }
    };

    backtrack(0, '', 0, 0);
    return result; 
};
