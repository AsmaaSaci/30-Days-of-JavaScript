/**
 * @param {number} x
 * @param {number} target
 * @return {number}
 */
var leastOpsExpressTarget = function (x, target) {
  let pos = 0, neg = 0, k = 0, pos_prev, neg_prev;
  while (target > 0) {
    const cur = target % x;
    target = Math.floor(target / x);
    if (k > 0) {
      const pos2 = Math.min(cur * k + pos, (cur + 1) * k + neg);
      const neg2 = Math.min((x - cur) * k + pos, (x - cur - 1) * k + neg);
      pos = pos2, neg = neg2;
    } else {
      pos = cur * 2, neg = (x - cur) * 2;
    }
    pos_prev = pos, neg_prev = neg;
    k++;
  }
  return Math.min(pos_prev, k + neg_prev) - 1;
};
